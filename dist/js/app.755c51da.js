(function(e){function t(t){for(var i,l,r=t[0],s=t[1],f=t[2],m=0,u=[];m<r.length;m++)l=r[m],Object.prototype.hasOwnProperty.call(n,l)&&n[l]&&u.push(n[l][0]),n[l]=0;for(i in s)Object.prototype.hasOwnProperty.call(s,i)&&(e[i]=s[i]);c&&c(t);while(u.length)u.shift()();return o.push.apply(o,f||[]),a()}function a(){for(var e,t=0;t<o.length;t++){for(var a=o[t],i=!0,r=1;r<a.length;r++){var s=a[r];0!==n[s]&&(i=!1)}i&&(o.splice(t--,1),e=l(l.s=a[0]))}return e}var i={},n={app:0},o=[];function l(t){if(i[t])return i[t].exports;var a=i[t]={i:t,l:!1,exports:{}};return e[t].call(a.exports,a,a.exports,l),a.l=!0,a.exports}l.m=e,l.c=i,l.d=function(e,t,a){l.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:a})},l.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},l.t=function(e,t){if(1&t&&(e=l(e)),8&t)return e;if(4&t&&"object"===typeof e&&e&&e.__esModule)return e;var a=Object.create(null);if(l.r(a),Object.defineProperty(a,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var i in e)l.d(a,i,function(t){return e[t]}.bind(null,i));return a},l.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return l.d(t,"a",t),t},l.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},l.p="/";var r=window["webpackJsonp"]=window["webpackJsonp"]||[],s=r.push.bind(r);r.push=t,r=r.slice();for(var f=0;f<r.length;f++)t(r[f]);var c=s;o.push([0,"chunk-vendors"]),a()})({0:function(e,t,a){e.exports=a("56d7")},"1d1b":function(e,t,a){"use strict";a("503e")},2844:function(e,t,a){"use strict";a("5a65")},"375c":function(e,t,a){},"3a75":function(e,t,a){"use strict";a("6d03")},"402e":function(e,t,a){"use strict";a("c889")},"503e":function(e,t,a){},"56d7":function(e,t,a){"use strict";a.r(t);var i=a("2b0e"),n=function(){var e=this,t=e._self._c;return t("div",{attrs:{id:"app"}},[t("router-view")],1)},o=[],l=(a("402e"),a("2877")),r={},s=Object(l["a"])(r,n,o,!1,null,null,null),f=s.exports,c=a("8c4f"),m=function(){var e=this,t=e._self._c;return t("div",[t("config-box",{ref:"configBox"}),e._m(0)],1)},u=[function(){var e=this,t=e._self._c;return t("div",[t("div",{staticStyle:{"font-family":"BaiDuZongYi"}},[e._v("百度字体")]),t("div",{staticStyle:{"font-family":"FangZheng"}},[e._v("方正字体")]),t("div",{staticStyle:{"font-family":"PanMenZhengDao"}},[e._v("庞门正道字体")]),t("div",{staticStyle:{"font-family":"RuiZi"}},[e._v("锐字真言体字体")]),t("div",{staticStyle:{"font-family":"SourceHanSans"}},[e._v("SourceHanSans字体")])])}],d=function(){var e=this,t=e._self._c;return t("div",[t("el-dialog",{attrs:{title:"配置",visible:e.dialogVisible,"close-on-click-modal":!1,"destroy-on-close":!0,"append-to-body":"",width:"100%"},on:{"update:visible":function(t){e.dialogVisible=t}}},[t("div",{staticClass:"main"},[t("div",{staticClass:"config-container"},[t("div",{staticClass:"config-title"},[e._v(e._s(e.title))]),t("config-form",{ref:"courseTitleForm",attrs:{formName:"courseTitleForm",subheading:"标题"},on:{saveForm:e.saveForm}}),t("config-form",{ref:"courseGradeForm",attrs:{formName:"courseGradeForm",subheading:"适合学员"},on:{saveForm:e.saveForm}}),t("config-form",{ref:"courseOutlineForm",attrs:{formName:"courseOutlineForm",subheading:"课程大纲"},on:{saveForm:e.saveForm}}),t("teacher-config-form",{ref:"teacherGroupForm",attrs:{formName:"teacherGroupForm"},on:{saveForm:e.saveForm}}),t("div",{staticClass:"config-footer"},[t("el-button",{directives:[{name:"preventReClick",rawName:"v-preventReClick"}],attrs:{size:"mini",type:"warning",disabled:!e.canvasImage},on:{click:function(t){return e.downloadPicture(e.canvasImage,"newFile")}}},[e._v("下载")]),t("el-button",{directives:[{name:"preventReClick",rawName:"v-preventReClick"}],attrs:{type:"success",size:"mini",disabled:e.imageLoading},on:{click:function(t){return e.save("save")}}},[e._v("保存")]),t("el-button",{directives:[{name:"preventReClick",rawName:"v-preventReClick"}],attrs:{type:"primary",size:"mini",disabled:e.imageLoading},on:{click:function(t){return e.save("preview")}}},[e._v("预览")])],1)],1),t("div",{directives:[{name:"loading",rawName:"v-loading",value:e.imageLoading,expression:"imageLoading"}],staticClass:"canvas-container",attrs:{"element-loading-text":"拼命加载中","element-loading-spinner":"el-icon-loading","element-loading-background":"rgba(0, 0, 0, 0.8)"}},[t("div",{attrs:{id:"canvas_image"}}),e.canvasImage?t("img",{attrs:{src:e.canvasImage,alt:""}}):e._e()])])])],1)},p=[],g=function(){var e=this,t=e._self._c;return t("div",[t("div",[t("el-divider",{attrs:{"content-position":"left"}},[e._v(e._s(e.subheading))]),t("el-form",{ref:e.formName,attrs:{model:e.form,"label-width":"80px"}},[t("div",{staticClass:"item-line"},[t("el-form-item",{attrs:{label:"位置:",prop:"x",rules:e.form_rulesIncludeZero}},[t("div",{staticClass:"item-line"},[t("span",{staticClass:"item-line-label"},[e._v("x:")]),t("el-input",{attrs:{placeholder:"请填写",disabled:e.disabledStatus,type:"number"},model:{value:e.form.x,callback:function(t){e.$set(e.form,"x",t)},expression:"form.x"}},[t("template",{slot:"append"},[e._v("px")])],2)],1)]),t("el-form-item",{attrs:{label:"",prop:"y","label-width":"0px",rules:e.form_rulesIncludeZero}},[t("div",{staticClass:"item-line"},[t("span",{staticClass:"item-line-label"},[e._v("y:")]),t("el-input",{attrs:{placeholder:"请填写",type:"number",disabled:e.disabledStatus},model:{value:e.form.y,callback:function(t){e.$set(e.form,"y",t)},expression:"form.y"}},[t("template",{slot:"append"},[e._v("px")])],2)],1)])],1),t("el-form-item",{attrs:{label:"宽度:",prop:"width",rules:e.form_rules}},[t("el-input",{attrs:{placeholder:"请填写",disabled:e.disabledStatus,type:"number"},model:{value:e.form.width,callback:function(t){e.$set(e.form,"width",t)},expression:"form.width"}},[t("template",{slot:"append"},[e._v("px")])],2)],1),e.isShowItem?t("el-form-item",{attrs:{label:"行间距:",prop:"line_space",rules:e.form_rules}},[t("el-input",{attrs:{placeholder:"请填写",disabled:e.disabledStatus,type:"number"},model:{value:e.form.line_space,callback:function(t){e.$set(e.form,"line_space",t)},expression:"form.line_space"}})],1):e._e(),e.isShowItem?t("el-form-item",{attrs:{label:"行数:",prop:"line_num",rules:e.form_rules}},[t("el-input",{attrs:{placeholder:"请填写",disabled:e.disabledStatus,type:"number"},model:{value:e.form.line_num,callback:function(t){e.$set(e.form,"line_num",t)},expression:"form.line_num"}})],1):e._e(),t("el-form-item",{attrs:{label:"排版:"}},[t("el-radio-group",{attrs:{size:"mini",disabled:e.disabledStatus},model:{value:e.form.composing,callback:function(t){e.$set(e.form,"composing",t)},expression:"form.composing"}},[t("el-radio-button",{attrs:{label:"left"}},[e._v("左对齐")]),t("el-radio-button",{attrs:{label:"center"}},[e._v("居中")]),t("el-radio-button",{attrs:{label:"right"}},[e._v("右对齐")])],1)],1),t("el-form-item",{attrs:{label:"字体"}},[t("el-select",{attrs:{disabled:e.disabledStatus,filterable:"",placeholder:"请选择"},model:{value:e.form.font_family,callback:function(t){e.$set(e.form,"font_family",t)},expression:"form.font_family"}},e._l(e.fontList,(function(e){return t("el-option",{key:e.value,attrs:{label:e.label,value:e.value}})})),1),t("el-popover",{attrs:{placement:"right-end",width:"100",trigger:"click"}},[t("div",{staticStyle:{"font-family":"BaiDuZongYi"}},[e._v("百度字体")]),t("div",{staticStyle:{"font-family":"FangZheng"}},[e._v("方正字体")]),t("div",{staticStyle:{"font-family":"PanMenZhengDao"}},[e._v("庞门正道字体")]),t("div",{staticStyle:{"font-family":"RuiZi"}},[e._v("锐字真言体字体")]),t("div",{staticStyle:{"font-family":"SourceHanSans"}},[e._v("思源黑体")]),t("i",{staticClass:"el-icon-info",attrs:{slot:"reference"},slot:"reference"})])],1),t("el-form-item",{attrs:{label:"字号",prop:"font_size",rules:e.form_rules}},[t("el-input",{attrs:{placeholder:"请填写",type:"number",disabled:e.disabledStatus},model:{value:e.form.font_size,callback:function(t){e.$set(e.form,"font_size",t)},expression:"form.font_size"}},[t("template",{slot:"append"},[e._v("px")])],2)],1),t("el-form-item",{attrs:{label:"颜色",prop:"font_color",rules:[{required:!0,message:"请选择",trigger:"change"}]}},[t("el-color-picker",{attrs:{disabled:e.disabledStatus},model:{value:e.form.font_color,callback:function(t){e.$set(e.form,"font_color",t)},expression:"form.font_color"}})],1)],1)],1)])},v=[],h=(a("d9e2"),{props:{formName:{type:String,default:""},subheading:{type:String,default:"副标题"},disabledStatus:{type:Boolean,default:!1}},data(){var e=(e,t,a)=>{let i=/^[1-9]\d*(\.\d+)?$/;i.test(Number(t))?a():a(new Error("请输入大于0的数字"))},t=(e,t,a)=>{let i=/^\d+(\.\d+)?$/;i.test(Number(t))?a():a(new Error("请输入大于等于0的数字"))};return{form:{x:"",y:"",width:"",line_space:36,line_num:1,composing:"left",font_family:"SourceHanSans",font_size:12,font_color:"#000000"},fontList:[{value:"BaiDuZongYi",label:"百度字体"},{value:"FangZheng",label:"方正字体"},{value:"PanMenZhengDao",label:"庞门正道字体"},{value:"RuiZi",label:"锐字真言体字体"},{value:"SourceHanSans",label:"思源黑体"}],form_rules:[{required:!0,message:"请填写",trigger:"blur"},{validator:e,trigger:"blur"}],form_rulesIncludeZero:[{required:!0,message:"请填写",trigger:"blur"},{validator:t,trigger:"blur"}]}},methods:{initConfigParams(e){this.form=e},save(){this.$refs[this.formName].validate(e=>{if(!e)return this.$emit("saveForm",{error:"检查表单数据"}),!1;this.$emit("saveForm",{formName:this.formName,form:this.form})})}},computed:{isShowItem(){return"courseGradeForm"!==this.formName}}}),b=h,_=(a("d9cd"),Object(l["a"])(b,g,v,!1,null,"f0dba158",null)),y=_.exports,C=function(){var e=this,t=e._self._c;return t("div",[t("div",[t("el-divider",{attrs:{"content-position":"left"}},[e._v("主讲老师")]),t("el-form",{ref:e.formName,attrs:{model:e.form,"label-width":"80px"}},e._l(e.form.teacher_group,(function(a,i){return t("div",{key:i,staticClass:"teacher-group"},[t("el-divider",[e._v("第"+e._s(i+1)+"位老师")]),t("h5",{staticClass:"option-title"},[e._v("头像")]),t("div",{staticClass:"item-line"},[t("el-form-item",{attrs:{label:"位置:",prop:"teacher_group."+i+".imageConfig.x",rules:e.form_rulesIncludeZero}},[t("div",{staticClass:"item-line"},[t("span",{staticClass:"item-line-label"},[e._v("x:")]),t("el-input",{attrs:{placeholder:"请填写",disabled:e.disabledStatus,type:"number"},model:{value:a.imageConfig.x,callback:function(t){e.$set(a.imageConfig,"x",t)},expression:"item.imageConfig.x"}},[t("template",{slot:"append"},[e._v("px")])],2)],1)]),t("el-form-item",{attrs:{label:"","label-width":"0px",prop:"teacher_group."+i+".imageConfig.y",rules:e.form_rulesIncludeZero}},[t("div",{staticClass:"item-line"},[t("span",{staticClass:"item-line-label"},[e._v("y:")]),t("el-input",{attrs:{disabled:e.disabledStatus,placeholder:"请填写",type:"number"},model:{value:a.imageConfig.y,callback:function(t){e.$set(a.imageConfig,"y",t)},expression:"item.imageConfig.y"}},[t("template",{slot:"append"},[e._v("px")])],2)],1)])],1),t("h5",{staticClass:"option-title"},[e._v("姓名")]),t("div",[t("div",{staticClass:"item-line"},[t("el-form-item",{attrs:{label:"位置:",prop:"teacher_group."+i+".nameConfig.x",rules:e.form_rulesIncludeZero}},[t("div",{staticClass:"item-line"},[t("span",{staticClass:"item-line-label"},[e._v("x:")]),t("el-input",{attrs:{placeholder:"请填写",disabled:e.disabledStatus,type:"number"},model:{value:a.nameConfig.x,callback:function(t){e.$set(a.nameConfig,"x",t)},expression:"item.nameConfig.x"}},[t("template",{slot:"append"},[e._v("px")])],2)],1)]),t("el-form-item",{attrs:{label:"","label-width":"0px",prop:"teacher_group."+i+".nameConfig.y",rules:e.form_rulesIncludeZero}},[t("div",{staticClass:"item-line"},[t("span",{staticClass:"item-line-label"},[e._v("y:")]),t("el-input",{attrs:{disabled:e.disabledStatus,placeholder:"请填写",type:"number"},model:{value:a.nameConfig.y,callback:function(t){e.$set(a.nameConfig,"y",t)},expression:"item.nameConfig.y"}},[t("template",{slot:"append"},[e._v("px")])],2)],1)])],1),t("el-form-item",{attrs:{label:"宽度:",rules:e.form_rules,prop:"teacher_group."+i+".nameConfig.width"}},[t("el-input",{attrs:{placeholder:"请填写",disabled:e.disabledStatus,type:"number"},model:{value:a.nameConfig.width,callback:function(t){e.$set(a.nameConfig,"width",t)},expression:"item.nameConfig.width"}},[t("template",{slot:"append"},[e._v("px")])],2)],1),t("el-form-item",{attrs:{label:"字体"}},[t("el-select",{attrs:{disabled:e.disabledStatus,filterable:"",placeholder:"请选择"},model:{value:a.nameConfig.font_family,callback:function(t){e.$set(a.nameConfig,"font_family",t)},expression:"item.nameConfig.font_family"}},e._l(e.fontList,(function(e){return t("el-option",{key:e.value,attrs:{label:e.label,value:e.value}})})),1),t("el-popover",{attrs:{placement:"right-end",width:"100",trigger:"click"}},[t("div",{staticStyle:{"font-family":"BaiDuZongYi"}},[e._v("百度字体")]),t("div",{staticStyle:{"font-family":"FangZheng"}},[e._v("方正字体")]),t("div",{staticStyle:{"font-family":"PanMenZhengDao"}},[e._v("庞门正道字体")]),t("div",{staticStyle:{"font-family":"RuiZi"}},[e._v("锐字真言体字体")]),t("div",{staticStyle:{"font-family":"SourceHanSans"}},[e._v("思源黑体")]),t("i",{staticClass:"el-icon-info",attrs:{slot:"reference"},slot:"reference"})])],1),t("el-form-item",{attrs:{label:"字号",rules:e.form_rules,prop:"teacher_group."+i+".nameConfig.font_size"}},[t("el-input",{attrs:{placeholder:"请填写",disabled:e.disabledStatus,type:"number"},model:{value:a.nameConfig.font_size,callback:function(t){e.$set(a.nameConfig,"font_size",t)},expression:"item.nameConfig.font_size"}},[t("template",{slot:"append"},[e._v("px")])],2)],1),t("el-form-item",{attrs:{label:"颜色",prop:"teacher_group."+i+".nameConfig.font_color",rules:[{required:!0,message:"请选择",trigger:"change"}]}},[t("el-color-picker",{attrs:{disabled:e.disabledStatus},model:{value:a.nameConfig.font_color,callback:function(t){e.$set(a.nameConfig,"font_color",t)},expression:"item.nameConfig.font_color"}})],1)],1),t("h5",{staticClass:"option-title"},[e._v("介绍")]),t("div",[t("div",{staticClass:"item-line"},[t("el-form-item",{attrs:{label:"位置:",rules:e.form_rulesIncludeZero,prop:"teacher_group."+i+".infoConfig.x"}},[t("div",{staticClass:"item-line"},[t("span",{staticClass:"item-line-label"},[e._v("x:")]),t("el-input",{attrs:{placeholder:"请填写",disabled:e.disabledStatus,type:"number"},model:{value:a.infoConfig.x,callback:function(t){e.$set(a.infoConfig,"x",t)},expression:"item.infoConfig.x"}},[t("template",{slot:"append"},[e._v("px")])],2)],1)]),t("el-form-item",{attrs:{label:"","label-width":"0px",rules:e.form_rulesIncludeZero,prop:"teacher_group."+i+".infoConfig.y"}},[t("div",{staticClass:"item-line"},[t("span",{staticClass:"item-line-label"},[e._v("y:")]),t("el-input",{attrs:{disabled:e.disabledStatus,placeholder:"请填写",type:"number"},model:{value:a.infoConfig.y,callback:function(t){e.$set(a.infoConfig,"y",t)},expression:"item.infoConfig.y"}},[t("template",{slot:"append"},[e._v("px")])],2)],1)])],1),t("el-form-item",{attrs:{label:"宽度:",rules:e.form_rules,prop:"teacher_group."+i+".infoConfig.width"}},[t("el-input",{attrs:{placeholder:"请填写",disabled:e.disabledStatus,type:"number"},model:{value:a.infoConfig.width,callback:function(t){e.$set(a.infoConfig,"width",t)},expression:"item.infoConfig.width"}},[t("template",{slot:"append"},[e._v("px")])],2)],1),t("el-form-item",{attrs:{label:"行间距:",rules:e.form_rules,prop:"teacher_group."+i+".infoConfig.line_space"}},[t("el-input",{attrs:{placeholder:"请填写",disabled:e.disabledStatus,type:"number"},model:{value:a.infoConfig.line_space,callback:function(t){e.$set(a.infoConfig,"line_space",t)},expression:"item.infoConfig.line_space"}})],1),t("el-form-item",{attrs:{label:"行数:",rules:e.form_rules,prop:"teacher_group."+i+".infoConfig.line_num"}},[t("el-input",{attrs:{placeholder:"请填写",disabled:e.disabledStatus,type:"number"},model:{value:a.infoConfig.line_num,callback:function(t){e.$set(a.infoConfig,"line_num",t)},expression:"item.infoConfig.line_num"}})],1),t("el-form-item",{attrs:{label:"字体"}},[t("el-select",{attrs:{disabled:e.disabledStatus,filterable:"",placeholder:"请选择"},model:{value:a.infoConfig.font_family,callback:function(t){e.$set(a.infoConfig,"font_family",t)},expression:"item.infoConfig.font_family"}},e._l(e.fontList,(function(e){return t("el-option",{key:e.value,attrs:{label:e.label,value:e.value}})})),1),t("el-popover",{attrs:{placement:"right-end",width:"100",trigger:"click"}},[t("div",{staticStyle:{"font-family":"BaiDuZongYi"}},[e._v("百度字体")]),t("div",{staticStyle:{"font-family":"FangZheng"}},[e._v("方正字体")]),t("div",{staticStyle:{"font-family":"PanMenZhengDao"}},[e._v("庞门正道字体")]),t("div",{staticStyle:{"font-family":"RuiZi"}},[e._v("锐字真言体字体")]),t("div",{staticStyle:{"font-family":"SourceHanSans"}},[e._v("思源黑体")]),t("i",{staticClass:"el-icon-info",attrs:{slot:"reference"},slot:"reference"})])],1),t("el-form-item",{attrs:{label:"字号",rules:e.form_rules,prop:"teacher_group."+i+".infoConfig.font_size"}},[t("el-input",{attrs:{placeholder:"请填写",type:"number",disabled:e.disabledStatus},model:{value:a.infoConfig.font_size,callback:function(t){e.$set(a.infoConfig,"font_size",t)},expression:"item.infoConfig.font_size"}},[t("template",{slot:"append"},[e._v("px")])],2)],1),t("el-form-item",{attrs:{label:"颜色",prop:"teacher_group."+i+".infoConfig.font_color",rules:[{required:!0,message:"请选择",trigger:"change"}]}},[t("el-color-picker",{attrs:{disabled:e.disabledStatus},model:{value:a.infoConfig.font_color,callback:function(t){e.$set(a.infoConfig,"font_color",t)},expression:"item.infoConfig.font_color"}})],1)],1),t("div",{staticStyle:{"text-align":"right"}},[t("el-button",{attrs:{type:"danger",disabled:e.disabledStatus,icon:"el-icon-delete",circle:""},on:{click:function(t){return e.deleteItem(i)}}})],1)],1)})),0),t("div",{staticStyle:{"text-align":"right"}},[t("el-button",{attrs:{type:"primary",disabled:e.disabledStatus,size:"medium"},on:{click:e.addItem}},[e._v("新增老师")])],1)],1)])},x=[],S=(a("14d9"),{props:{formName:{type:String,default:""},disabledStatus:{type:Boolean,default:!1}},data(){var e=(e,t,a)=>{let i=/^[1-9]\d*(\.\d+)?$/;i.test(Number(t))?a():a(new Error("请输入大于0的数字"))},t=(e,t,a)=>{let i=/^\d+(\.\d+)?$/;i.test(Number(t))?a():a(new Error("请输入大于等于0的数字"))};return{form:{teacher_group:[]},fontList:[{value:"BaiDuZongYi",label:"百度字体"},{value:"FangZheng",label:"方正字体"},{value:"PanMenZhengDao",label:"庞门正道字体"},{value:"RuiZi",label:"锐字真言体字体"},{value:"SourceHanSans",label:"思源黑体"}],form_rules:[{required:!0,message:"请填写",trigger:"blur"},{validator:e,trigger:"blur"}],form_rulesIncludeZero:[{required:!0,message:"请填写",trigger:"blur"},{validator:t,trigger:"blur"}]}},mounted(){},methods:{save(){this.$refs[this.formName].validate(e=>{if(!e)return this.$emit("saveForm",{error:"检查表单数据"}),!1;this.$emit("saveForm",{formName:this.formName,form:this.form})})},deleteItem(e){this.form.teacher_group.splice(e,1)},addItem(){this.form.teacher_group.push({imageConfig:{x:"",y:""},nameConfig:{x:"",y:"",width:"",font_family:"SourceHanSans",font_size:12,font_color:"#000000"},infoConfig:{x:"",y:"",width:"",line_space:36,line_num:1,font_family:"SourceHanSans",font_size:12,font_color:"#000000"}})},initConfigParams(e){this.form=e}}}),w=S,k=(a("2844"),Object(l["a"])(w,C,x,!1,null,"fdeac34e",null)),$=k.exports,F=(a("b7ef"),a("907a"),a("986a"),a("1d02"),a("3c5d"),a("1b3b"),a("3d71"),a("c6e3"),{data(){return{classInfoCtx:null}},methods:{initCanvas(e){let{url:t}=e;return new Promise(e=>{let a=this,i=new Image;i.src=t,i.crossOrigin="Anonymous",i.onload=function(){let{width:t,height:n}=i,o=document.getElementById("canvas_image"),l=`<canvas id="canvas" width="${t}" height="${n}"\n                    style="position: absolute;\n                    top: -${Math.ceil(n/4)}px;\n                    left: -${Math.ceil(t/4)}px;\n                    transform: scale(0.5);"></canvas>`;o.innerHTML=l;var r=document.getElementById("canvas");a.classInfoCtx=r.getContext("2d"),a.classInfoCtx.drawImage(this,0,0),e(1)}})},addContentTitle(e){return new Promise(t=>{if(!e)return t("Not configured Title"),!1;let a=this,{font_size:i,font_color:n,x:o,y:l,width:r,line_num:s,line_space:f,font_family:c,composing:m}=e,u=e.text||"[2023春]第二轮光学进阶第4讲 反射折射";a.classInfoCtx.font=`${i}px ${c}`,a.classInfoCtx.fillStyle=n,a.toFormateStr(a.classInfoCtx,u,r,s,o,i+l,f,m),t("success")})},addContentGrade(e){return new Promise(t=>{if(!e)return t("Not configured Grade"),!1;let a=this,{font_size:i,font_color:n,x:o,y:l,width:r,font_family:s,composing:f}=e,c=e.text||"高一、高二、高三";a.classInfoCtx.font=`${i}px ${s}`,a.classInfoCtx.fillStyle=n,a.toFormateStr(a.classInfoCtx,c,r,1,o,i+l,1,f),t("success")})},addContentOutline(e){return new Promise(t=>{if(!e)return t("Not configured"),!1;let a=[];if(e.subclass)a=e.subclass;else for(let m=0;m<Number(e.line_num);m++)a.push({subject:"这是一个课程大纲的样例这是一个课程大纲的样例"});let i=this,{font_size:n,line_num:o,line_space:l,x:r,y:s,width:f}=e,c=e.composing;i.classInfoCtx.font=`${n}px ${e.font_family}`,i.classInfoCtx.fillStyle=e.font_color;for(let e=0;e<o;e++)a[e]&&i.toFormateStr(i.classInfoCtx,a[e].subject,f,1,r,s+n+e*l,n,c);t("success")})},addTeacher(e){return new Promise(t=>{let i=this,n=e.teacher_group;if(!e||!n.length)return void t("Not configured Teacher");let o=[];n.forEach(()=>{let e={teacher_name:"Panda",random_teacher_mage:a("f6c6"),formal_intro:"师范专业毕业7年教龄，授课时长累计6000小时擅长从逻辑梳理题型搭建精简物理体系，减轻记忆负担被学生誉为“最善良”的物理老师。以下都是测试文案测试文案测试文案测试文案测试文案测试文案测试文案测试文案测试文案测试文案测试文案"};o.push(e)});let l=0;for(let e=0;e<n.length;e++){if(!o[e])break;let{teacher_name:a,formal_intro:r}=o[e];i.addTeacherName({...n[e].nameConfig,teacher_name:a}),i.addTeacherInfo({...n[e].infoConfig,formal_intro:r});let s=new Image;s.src=o[e].random_teacher_mage,s.crossOrigin="Anonymous",s.onload=function(){let{x:a,y:r}=n[e].imageConfig;i.classInfoCtx.drawImage(this,a,r),l++,l===o.length&&t("success")}}})},addTeacherName(e){let t=this,{teacher_name:a,font_size:i,font_family:n,font_color:o,width:l,x:r,y:s}=e;t.classInfoCtx.font=`${i}px ${n}`,t.classInfoCtx.fillStyle=o,t.toFormateStr(t.classInfoCtx,a,l,1,r,i+s,i,"left")},addTeacherInfo(e){let t=this,{formal_intro:a,font_size:i,font_family:n,font_color:o,width:l,x:r,y:s,line_num:f,line_space:c}=e;t.classInfoCtx.font=`${i}px ${n}`,t.classInfoCtx.fillStyle=o,t.toFormateStr(t.classInfoCtx,a,l,f,r,i+s,c,"left")},_calcMaxDimension(e,t,a,i){const n=e/a,o=t/i;let l=Math.min(a,e),r=Math.min(i,t);return n<1&&n<o?(l=a*n,r=i*n):o<1&&o<n&&(l=a*o,r=i*o),{width:Math.floor(l),height:Math.floor(r)}},toFormateStr(e,t,a,i,n,o,l){let r=arguments.length>7&&void 0!==arguments[7]?arguments[7]:"left";var s=e.measureText(t).width,f=o;let c=i+1;var m="",u=s/a,d=Math.ceil(u);let p=parseInt(t.length/u),g=n;if("center"===r?g=a/2+n:"right"===r&&(g=a+n),s<a)e.textAlign=r,e.fillText(t,g,f);else for(var v=1;v<d+1;v++){let a=p*(v-1);if(!(v<c||-1===c))break;m=t.substr(a,p),e.textAlign=r,e.fillText(m,g,f),f+=l}},getCanvasData(e){let t=document.getElementById(""+e),a=t.toDataURL("image/png");return a},downloadPicture(e,t){var a=e.split(","),i=a[0].match(/:(.*?);/)[1],n=atob(a[1]),o=n.length,l=new Uint8Array(o);while(o--)l[o]=n.charCodeAt(o);let r=`${t}${(new Date).getTime()}`;var s=new File([l],r,{type:i}),f=document.createElement("a");f.download=s.name;let c=URL.createObjectURL(s);f.href=c,document.body.appendChild(f),f.click(),document.body.removeChild(f),URL.revokeObjectURL(c),this.loading=!1},createFile(e,t){const a=window.atob(e.split(",")[1]),i=new Uint8Array(a.length);for(let s=0;s<a.length;s++)i[s]=a.charCodeAt(s);var n=e.split(","),o=n[0].match(/:(.*?);/)[1];let l=`${t}${(new Date).getTime()}${this.getRandomNum(1,99)}`;const r=new File([i],l,{type:o});return r},getRandomNum(e,t){return Math.floor(Math.random()*(t-e+1)+e)}}}),I={mixins:[F],data(){return{dialogVisible:!1,config:{},executeNum:0,backNum:0,saveType:"save",canvasBackgroudImage:"",configData:null,canvasImage:"",imageLoading:!1}},computed:{title(){return"详情图参数配置"}},components:{"config-form":y,"teacher-config-form":$},methods:{saveConfig(){this.$message.success("控制台查看保存数据"),console.log({config:this.config,canvasImage:this.canvasImage,file:this.createFile(this.canvasImage,"newFile")})},saveForm(e){if(this.backNum--,e.error);else if(this.config[e.formName]=e.form,this.executeNum--,0===this.executeNum)return this.resetExecuteNum(),this.saveSuccess(),!1;0===this.backNum&&"preview"===this.saveType&&this.preview()},saveSuccess(){"save"===this.saveType?this.saveConfig():this.preview()},removeCanvas(){let e=document.getElementById("canvas_image");e&&(e.innerHTML="")},preview(){this.removeCanvas(),this.startCanvas()},startCanvas(){this.imageLoading=!0,this.initCanvas({url:this.canvasBackgroudImage}).then(()=>{this.$nextTick(()=>{Promise.all([this.addContentTitle({...this.config["courseTitleForm"]}),this.addContentGrade({...this.config["courseGradeForm"]}),this.addContentOutline({...this.config["courseOutlineForm"]}),this.addTeacher({...this.config["teacherGroupForm"]})]).then(()=>{this.canvasImage=this.getCanvasData("canvas"),this.imageLoading=!1})})})},save(e){this.saveType=e,this.resetExecuteNum(),this.config={};let t=["courseTitleForm","courseGradeForm","courseOutlineForm","teacherGroupForm"];this.executeNum=t.length,this.backNum=t.length;for(let a=0;a<t.length;a++)this.$refs[t[a]].save()},resetExecuteNum(){this.executeNum=0,this.backNum=0},openDialog(e){this.dialogVisible=!0,this.configData=JSON.parse(JSON.stringify(e));let{template_img:t,config_params:a}=e;t&&(this.canvasBackgroudImage=t,this.$nextTick(()=>{this.initCanvas({url:t}).then(()=>{this.$nextTick(()=>{a&&(this.config=a,this.$refs.courseTitleForm.initConfigParams(a.courseTitleForm),this.$refs.courseGradeForm.initConfigParams(a.courseGradeForm),this.$refs.courseOutlineForm.initConfigParams(a.courseOutlineForm),this.$refs.teacherGroupForm.initConfigParams(a.teacherGroupForm)),this.startCanvas()})})}))}},directives:{preventReClick:{inserted(e,t){e.addEventListener("click",()=>{e.disabled||(e.disabled=!0,setTimeout(()=>{e.disabled=!1},t.value||1e3))})}}}},N=I,Z=(a("3a75"),Object(l["a"])(N,d,p,!1,null,"b7f547da",null)),T=Z.exports,O=a("60e1"),z=a.n(O),P={data(){return{config:{courseTitleForm:{x:199,y:20,width:430,line_space:100,line_num:2,composing:"center",font_family:"BaiDuZongYi",font_size:49,font_color:"#000000"},courseGradeForm:{x:265,y:380,width:200,line_space:36,line_num:1,composing:"left",font_family:"SourceHanSans",font_size:25,font_color:"#000000"},courseOutlineForm:{x:265,y:800,width:200,line_space:62,line_num:5,composing:"left",font_family:"SourceHanSans",font_size:25,font_color:"#000000"},teacherGroupForm:{teacher_group:[{imageConfig:{x:500,y:1375},nameConfig:{x:80,y:1350,width:200,font_family:"RuiZi",font_size:35,font_color:"#547E99"},infoConfig:{x:80,y:1425,width:370,line_space:40,line_num:5,font_family:"BaiDuZongYi",font_size:25,font_color:"#000000"}}]}}}}},D={name:"Home",mixins:[P],data(){return{}},mounted(){this.$nextTick(()=>{this.$refs.configBox.openDialog({template_img:z.a,config_params:this.config})})},components:{"config-box":T}},M=D,R=(a("1d1b"),Object(l["a"])(M,m,u,!1,null,"48c1ff36",null)),L=R.exports;i["default"].use(c["a"]);const B=[{path:"/",name:"Home",component:L}],j=new c["a"]({routes:B});var G=j,H=a("2f62");i["default"].use(H["a"]);var E=new H["a"].Store({state:{},mutations:{},actions:{},modules:{}}),A=(a("0fb7"),a("450d"),a("f529")),Y=a.n(A),q=(a("acb6"),a("c673")),U=a.n(q),J=(a("10cb"),a("f3ad")),V=a.n(J),K=(a("eca7"),a("3787")),Q=a.n(K),W=(a("425f"),a("4105")),X=a.n(W),ee=(a("a7cc"),a("df33")),te=a.n(ee),ae=(a("06f1"),a("6ac9")),ie=a.n(ae),ne=(a("f4f9"),a("c2cc")),oe=a.n(ne),le=(a("7a0f"),a("0f6c")),re=a.n(le),se=(a("1f1a"),a("4e4b")),fe=a.n(se),ce=(a("b5d8"),a("f494")),me=a.n(ce),ue=(a("fe07"),a("6ac5")),de=a.n(ue),pe=(a("e3ea"),a("7bc3")),ge=a.n(pe),ve=(a("a586"),a("7464")),he=a.n(ve),be=(a("6611"),a("e772")),_e=a.n(be),ye=(a("3c52"),a("0d7b")),Ce=a.n(ye),xe=(a("1951"),a("eedf")),Se=a.n(xe),we=(a("be4f"),a("896a")),ke=a.n(we);i["default"].use(ke.a.directive),i["default"].use(Se.a),i["default"].use(Ce.a),i["default"].use(_e.a),i["default"].use(he.a),i["default"].use(ge.a),i["default"].use(de.a),i["default"].use(me.a),i["default"].use(fe.a),i["default"].use(re.a),i["default"].use(oe.a),i["default"].use(ie.a),i["default"].use(te.a),i["default"].use(X.a),i["default"].use(Q.a),i["default"].use(V.a),i["default"].use(U.a),i["default"].prototype.$message=Y.a;a("0fae");i["default"].config.productionTip=!1,new i["default"]({router:G,store:E,render:e=>e(f)}).$mount("#app")},"5a65":function(e,t,a){},"60e1":function(e,t,a){e.exports=a.p+"img/template.8788c684.png"},"6d03":function(e,t,a){},c889:function(e,t,a){},d9cd:function(e,t,a){"use strict";a("375c")},f6c6:function(e,t,a){e.exports=a.p+"img/panda.1fd1aa19.png"}});
//# sourceMappingURL=app.755c51da.js.map